---
title: 基礎習得後の苦難ついて私が知っている二、三の事柄
permalink: /two_or_three_things_I_Know_about_this_site_03.html
eleventyNavigation:
  parent: two_or_three_things_I_Know_about_this_site
  key: 基礎習得後の苦難ついて私が知っている二、三の事柄
  title: 基礎習得後の苦難ついて私が知っている二、三の事柄
  order: 3
layout: layouts/page.njk
metaDesc:
date: 2021-06-07
updated: 2021-07-04
cssBodyId: page
tags:
  - rss
---

さて、ようやく本題？

### 11ty/Eleventy

例えば[Jamstack.org](https://jamstack.org/generators/)を一覧すればお分かりの通り、JavaScriptベースの静的サイト生成ツールは様々あります。  
JavaScriptベースに限らず有名ドコロだと、何となくの印象的なトレンドで、[Jekyll](https://jekyllrb.com/)から始まり、[Hexo](https://hexo.io/)や[Hugo](https://gohugo.io/)の時代が来て、今は[Gatsby](https://www.gatsbyjs.com/)や[Next.js](https://nextjs.org/)が熱いぜ、みたいな？

あくまで個人的な印象ですが、日本語情報が豊富に入手できるGatsbyやNext.jsではなく、何故に[11ty/Eleventy](https://www.11ty.dev/)にしたのか、ですが、「個人的に、とっつきやすかった」になります。  
何とも曖昧な表現ですが、コレに限らず、数多のフレームワークって「相性」ってあるのではないかと。  
何と言うか…打てば響く、ではないですが、分からなくても調べてそれを元に実装すれば「できた」となる達成感…学習曲線みたいな…

とは言うものの、結局の所、コンポーネント指向の波に乗り切れていないロートル・老害でしか無いと言えば実にその通りなのでありまして。  
逆に言うと11ty/Eleventyは自分自身の過去の開発技法、ベースとなるページレイアウトを作り、それを継承/extendして…コンポーネント別にincludeさせず、個々のページの変更点だけを書いていく、という手法ですね。  
あ、いや、ReactやVueをベースにしたプロダクトもそうなのかもしれませんが、何故だろ…何かこう、しっくり来なかったと言うか…  
だからと言って11ty/Eleventyはそういうロートル向けかとか、そういう<ruby>議論を吹っかけるの<rt>マサカリ</rt></ruby>は、やめて下さい…既に自分は死に体ですので、完全に無意味な行為です…

および、コレを書いている初稿の時点では実装していませんが、「[11ty/eleventy×microCMSを使ったJamstackなサイトの作り方 - Qiita](https://qiita.com/yuki0410_/items/712cd998c3df55ba58c8)」とありますので、Jamstackを実装できるなら何でもいいや、非同期処理やキャッシュも使えるし、それよりも個別に管理画面を実装するの、面倒だしなぁ、というやや投げやりな理由もあります。

また、PHPベースの静的サイト生成も可能ではありますが、Sass/SCSSなども同時に触る必要があるため、だったら、Node.jsで統一した方がいいんじゃないかな、とも思いましたので、採用を見送りました。

### 問題はその先に存在した

でまぁ。  
具体的に使うとなると、どういったアプローチをするのがいいのだろうか？です。  
逆に言うと、GatsbyやNext.jsは、このアプローチ、具体的には、スタータキット・テンプレートなどが最初にありきでつまづいてしまったのかな、自分の場合、と思いますが…正直、分からないですね…  
何と言うか、チュートリアル卒業後から実戦配備への閾値…学習コストが高すぎると言うか…特に自分含めて初見さんだと…とは感じますね…  
結論の一つとして、 **モダンなJavaScriptの記述方が身に付いていない** 、それに尽きるのではないかと。  
もう一つ挙げるなら、ピン技術屋の限界ですね…手近に相談できる知り合いが居ないという。

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">こういう実学だと「分かったつもりになれたらおしまい」ではなく「学んだ先に実践の場がある」ものなので、いざ実践してみた途端にその薄っぺらさが露顕してしまうことが多い。そこできちんと学び直せる人はまだ良いのだけど、浅薄さを隠してデキるふりばかりするようになったらダークサイドまっしぐら</p>&mdash; TJO (@TJO_datasci) <a href="https://twitter.com/TJO_datasci/status/1410801686201835524?ref_src=twsrc%5Etfw">July 2, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

正にその通りでありまして。  
…と言いますか「浅薄さを隠してデキるふりばかりする」って何だそりゃ…あ、この自分の投稿かぁ、とか何とか。

今回の11ty/Eleventyに関しても、当初はこのアプローチ、さくっと11ty/Eleventyのチュートリアル、次いで、スタータキット・テンプレートを漁る、でしたが、行き詰まり感が凄くて、結局ゼロベースから構築…多分5〜6回程スクラップ&amp;ビルド、しかし最終的には、[andy-piccalilli/11ty-pattern-library](https://github.com/andy-piccalilli/11ty-pattern-library)をFork程度では済まない程、改修した、になります。  
当たり前ですが現実問題として、自分のニーズにドンピシャなスタータキットは存在せず、何かを足すか引くかしないと使えません。  
足す場合はともかく、引くのは至難の業ではないかと思いますし、いっその事、スルーするのも一つの方法だったかな、と今にして思いますが。  
ただし足す場合も、既存のスタータの作法に従って、どこに何を追加するか、となると結構骨の折れる作業ではないかなと思わずにはおれません。  
だからと言ってゼロベースだと薄すぎて、といったジレンマがですね…

ところで今回このサイトを立ち上げるにあたって、2つの最低限の目標がありました。

一つ目、個別の文言は全てJSONあるいはMarkdownやYAML front matterで管理して、テンプレには書かない、という[MVC](https://ja.wikipedia.org/wiki/Model_View_Controller)的な考え方です…が、実際問題、どぉなんだろね、やたら変なトコロにこだわってるのかなぁ、という思いがありますが。  
一応の建前として、自分が構築した環境をユーザさんに手渡した後、HTMLタグが入ったファイルを修正、修正ミスで画面がワヤクチャに…を避ける、という。  
ただしこれは別に静的サイトジェネレータを使わずとも、私レベルでも既存の手法、GulpとPugをベースにした方法でもできます。

ところが二つ目、複数ページを同一テンプレートで管理する、となると、Gulpがベースだと今の時代、厳しい気が…補足しますと、かつては「できた」ですし、今もそれに従えば可能かと思いますが、今となっては何分古い情報なのと、そこで使用されていたNpmのパッケージのアップデートが行われていないため、使用を躊躇しまして。  
あるいは、自分の大好きな[Harp](https://harpjs.com/)でも可能かと思います。  
ホントねぇ…同一基準で記述した複数のMarkdownやYAML front matterなどがあり、それをある一つのテンプレに流し込んで、それぞれのHTMLを吐き出す、それだけなんですが…何ともまぁ…何かGulpの思想と合致しないのか何なのか…  
ただまぁ、今更と言っては失礼ですが、過去の技術…おいコレ凄く失礼だぞ…に固執する必然性もないし、何よりいずれ近い将来Jamstackを触りたい、という欲求がありましたので。

という訳で、改めて11ty/Eleventyのスタータプロジェクトを手当たり次第で`git clone`、`npm install`、と同時に、チラッとコードを眺めて「なるほど、この機能や挙動はこうやって実装・記述してるのか」を把握しました。  
それをある程度まで進めると、パターン化できるというか、それぞれのプロジェクトによって微妙に書き方やファイルの配置が違うけど、大枠で傾向が見えてきた、気分になりました。  
次にゼロベースからの実装になる訳ですが、前述の`git clone`したコードや本家のドキュメントから失敬する、になります。  
ですが、場合によっては、いきなり現在構築中の環境に取り込むのではなく、別環境で`npm init -y`から始めて、改めて挙動の確認をする、といった回りくどい方法も採りましたが。  
とは言え、最終的には前述の通り、11ty/EleventyとGulpで構築されたテンプレートをベースにした訳ですが。

それともう一つ、技術マターではなく、作業の進め方として、完璧を目指さず、抱え込まず、さっさと全世界に公開して、徐々に完成度を高めていこうではないか、最低限のレベルは存在するにしても、という。  
今更ながらですが、Git/GitHubを使い始めたので、この様な段階的なアプローチに適した環境/ツールではないかと思います。  
また、今回からはデータ…駄文がテキストファイルとして完全に手元に残りますので、行き詰まったらその時、諦めて次を漁ろう、といったスタンスでもあります。

### Morryセンセの次回作にご期待ください

ですかねぇ…  
現時点で文章を打ちながら、「この機能が無い、どうやって実装するのだろ」で、調べて簡単そうだと実装するし、そうでないなら後日後回し、ともかく早くリリースせにゃならんし…というのが本音です。

例えばこのページの下、これら一連の投稿一覧がありますが、「このページをActiveにしてるの、変だろ、Breadcrumbも無いし、この一連のページトップ、どこ？ww」  
いや分かってますよ…それが自身でサクッとできるならやってますがな…など。（Breadcrumbはできますが現在見送り）

あるいは、自身の文章のクセ、脚注（[markdown-it-footnote](https://www.npmjs.com/package/markdown-it-footnote)）は取り入れてますが稼働確認のみ、ToC（[markdown-it-table-of-contents](https://www.npmjs.com/package/markdown-it-table-of-contents)）は未実装、ただし必要なのかな、という段階、画像は[@11ty/eleventy-img](https://www.11ty.dev/docs/plugins/image/)があるけど…うーん、スターターキットでの使用はあるのか、という理由からGulp側で管理、などなど。

恥ずかしながら、例えば[ショートコード](https://www.11ty.dev/docs/shortcodes/)という機能があります。  
サンプルや多くのスタータキットだと、無視されているか、コンフィグである`.eleventy.js`に直書きしてあり、流石にそれは無いだろー普通、外出ししない？と来て、じゃぁどうやって、と。  
で、それが前述した「モダンなJavaScriptの記述方」になる訳で、その辺が一番しんどいですね…と言うか、未だにホント、分からない…自力で書ける気がしない…よく自力でコーディングサンプル見つけたよ、です…

ざっと11ty/Eleventyを実戦を念頭に使った感じ、[カスタムタグ](https://www.11ty.dev/docs/custom-tags/)と[Navigationプラグイン](https://www.11ty.dev/docs/plugins/navigation/)の使い分け、そのページで取得できるメタ情報…PHPだと`verdump`で確認しがちな、が、ちょっと不明瞭な点が多く（当然現時点でも）、失礼ながら、これが[Pico CMS](https://picocms.org/)だと、かなりある程度何とでもなるのに、みたいな葛藤がありました、あります。  
これらは今後の運用で、クリアしていかなければならない問題ではありますが、自身での使用ならともかく、ユーザさんからのリクエストだと、現時点では解決できない可能性の方が高いですね。
